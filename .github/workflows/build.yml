name: Kernel Build
on:
  # Weekly auto-build
  schedule:
    - cron: "0 0 * * 1"
  workflow_dispatch:
    inputs:
      spec:
        description: 'Build Specification'
        type: string
        default: "new"
        required: true
      publish:
        description: 'Publish Builds'
        type: boolean
        default: true
        required: true

# this job will publish images, and needs higher perms.
permissions:
  contents: read
  packages: write
  id-token: write
jobs:
  test:
    uses: ./.github/workflows/matrix.yml
    with:
      spec: ${{ inputs.spec }}
      publish: ${{ inputs.publish }}
